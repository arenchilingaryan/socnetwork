(this.webpackJsonpsn=this.webpackJsonpsn||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/defaultUser.bff3404e.jpg"},101:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},138:function(e,t){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),s=a.n(l),c=a(6),i=a(19),o=a(3),u=a(8),m=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),s=Object(u.a)(l,2),c=s[0],i=s[1],o=Object(n.useState)(null),m=Object(u.a)(o,2),f=m[0],p=m[1],d=Object(n.useCallback)((function(e,t,a){r(e),i(t),p(a),localStorage.setItem("userData",JSON.stringify({userId:t,token:e,email:a}))}),[]),g=Object(n.useCallback)((function(){r(null),i(null),p(null),localStorage.removeItem("userData"),window.location.reload()}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));window.data=e,e&&e.token&&d(e.token,e.userId,e.email)}),[d]),{login:d,logout:g,token:a,userId:c,email:f}};function f(){}var p=Object(n.createContext)({token:"",userId:"",email:"",userName:"",login:f,logout:f,isAuthenticated:!1}),d=a(7),g=a(5),E=a.n(g),_=a(9),b=a(10),N=a.n(b),h=a(71),v=a.n(h),O=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),s=Object(u.a)(l,2),c=s[0],i=s[1],o=Object(n.useContext)(p);return{loading:a,request:Object(n.useCallback)(function(){var e=Object(_.a)(E.a.mark((function e(t){var a,n,l,s,c,u=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:"GET",n=u.length>2&&void 0!==u[2]?u[2]:null,l=u.length>3&&void 0!==u[3]&&u[3],s={},n&&l&&(s={Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"}),n&&!l&&(s={"Content-Type":"application/json"}),r(!0),e.prev=7,e.next=10,v()({method:a,url:t,data:n,headers:s});case 10:return c=e.sent,r(!1),e.abrupt("return",c.data);case 15:throw e.prev=15,e.t0=e.catch(7),r(!1),i(e.t0.message),e.t0;case 20:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),[o.token]),error:c,clearError:function(){return i(null)}}},y=a(1),I={userId:"",img:"",userName:"",birthday:"",email:"",about:"",age:"",followers:[],following:[],firstName:"",lastName:"",dialogs:[]},w=function(e){return{type:"SET_PROFILE_DATA",data:e}};a(98);var j={userId:"",img:"",userName:"",birthday:"",email:"",about:"",age:"",followers:[],following:[],firstName:"",lastName:"",dialogs:[]},P=function(e){return{type:"SET_MY_PROFILE_DATA",data:e}};a(99);function S(){return r.a.createElement("div",{className:"backdrop"},r.a.createElement("div",{className:"spinner"}),r.a.createElement("div",{className:"logo"},"loding..."))}var k=Object(o.b)((function(e){return{profile:e.profile}}),(function(e){return{setProfile:function(t){return e(w(t))}}}))((function(e){var t=Object(d.g)().id,a=O(),l=a.request,s=a.loading,c=m(),i=Object(d.f)();return Object(n.useEffect)((function(){t?l("/api/profile/getinfo","POST",{userId:t},!1).then((function(t){return e.setProfile(t.user)})):c.userId&&l("/api/profile/getinfo","POST",{userId:c.userId},!0).then((function(t){return e.setProfile(t.user)}))}),[c.userId]),r.a.createElement("div",{className:"profile__followers"},s?r.a.createElement(S,null):e.profile.followers.length?e.profile.followers.map((function(e){return r.a.createElement("div",{className:"followers__item"},r.a.createElement("img",{onClick:function(){return function(e){i.push("/profile/".concat(e))}(e.id)},className:"followers__item-img",src:e.img?"data:image/png;base64,".concat(e.img):N.a,alt:"sorry bro"}),r.a.createElement("span",{className:"followers__item-name"}," ",e.userName?e.userName:"USER"," "))})):r.a.createElement("div",{className:"followers__null"},"You haven't Followers"))}));a(101);var T=Object(o.b)((function(e){return{profile:e.profile,myProfile:e.myProfile}}),(function(e){return{setProfile:function(t){return e(w(t))},setMyProfile:function(t){return e(P(t))}}}))((function(e){var t=Object(d.g)().id,a=O(),l=a.request,s=a.loading,c=m(),i=Object(d.f)();function o(){return(o=Object(_.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l("/api/useraction/unfollow","POST",{userId:a,myId:c.userId},!0);case 3:return t.next=5,l("/api/profile/getinfo","POST",{userId:c.userId},!0);case 5:n=t.sent,e.setMyProfile(n.user),e.setProfile(n.user),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),new Error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){t?l("/api/profile/getinfo","POST",{userId:t},!1).then((function(t){return e.setProfile(t.user)})):c.userId&&l("/api/profile/getinfo","POST",{userId:c.userId},!0).then((function(t){return e.setProfile(t.user)}))}),[c.userId]),r.a.createElement("div",{className:"profile__following"},s?r.a.createElement(S,null):e.myProfile.following.map((function(e){return r.a.createElement("div",{key:e.id,className:"following__item"},r.a.createElement("img",{onClick:function(){return function(e){i.push("/profile/".concat(e))}(e.id)},className:"following__item-img",src:e.img?"data:image/png;base64,".concat(e.img):N.a,alt:"sorry bro :'("}),r.a.createElement("span",{className:"following__item-name"}," ",e.userName?e.userName:"USER"," "),r.a.createElement("button",{onClick:function(){return function(e){return o.apply(this,arguments)}(e.id)},className:"following__unfollow-btn"},"Unfollow"))})))})),C=a(15),x=a(16);a(104);var U=Object(o.b)((function(e){return{profile:e.profile}}))((function(e){var t=e.profile;return r.a.createElement("div",{className:"profileInfo"},r.a.createElement("div",{className:"profileInfo__item"},r.a.createElement("p",{className:"profileInfo__titles"}," Email "),r.a.createElement("p",null," ",t.email," ")),r.a.createElement("div",{className:"profileInfo__item"},r.a.createElement("p",{className:"profileInfo__titles"}," Firstname "),r.a.createElement("p",null," ",t.firstName," ")),r.a.createElement("div",{className:"profileInfo__item"},r.a.createElement("p",{className:"profileInfo__titles"}," Lastname "),r.a.createElement("p",null," ",t.lastName," ")),r.a.createElement("div",{className:"profileInfo__item"},r.a.createElement("p",{className:"profileInfo__titles"}," Age "),r.a.createElement("p",null," ",t.age," ")),r.a.createElement("div",{className:"profileInfo__item"},r.a.createElement("p",{className:"profileInfo__titles"}," Birthday "),r.a.createElement("p",null," ",t.birthday," ")),r.a.createElement("div",{className:"profileInfo__item"},r.a.createElement("p",{className:"profileInfo__titles"}," About "),r.a.createElement("p",null," ",t.about," ")))}));a(105);var D=Object(o.b)((function(e){return{profile:e.profile}}),(function(e){return{setProfile:function(t){return e(w(t))},updateImg:function(t){return e(function(e){return{type:"UPDATE_PROFILE_IMG",img:e}}(t))}}}))((function(e){var t=O(),a=t.request,l=t.loading,s=Object(d.g)(),i=s.id,o=s.detail,f=m(),p=Object(n.useState)(!1),g=Object(u.a)(p,2),b=g[0],h=g[1],v=Object(n.useState)(""),y=Object(u.a)(v,2),I=y[0],w=y[1];Object(n.useEffect)((function(){i||o?i&&"followers"!==i&&"following"!==i&&a("/api/profile/getinfo","POST",{userId:i},!1).then((function(t){return e.setProfile(t.user)})):f.userId&&a("/api/profile/getinfo","POST",{userId:f.userId},!0).then((function(t){return e.setProfile(t.user)}))}),[f.userId,i,o,a]);var j=function(e){a("/api/profile/message","POST",{userId:e,id:f.userId,message:I},!0),h(!1)};return r.a.createElement("div",{className:"profile__wrapper"},r.a.createElement("div",{className:"profile__container"},l?r.a.createElement(S,null):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"profile__modal",style:b?{display:"block"}:{display:"none"}},r.a.createElement("form",{onSubmit:function(){return j(i)},className:"profile__modal-inside"},r.a.createElement("input",{type:"text",className:"profile__modal-input",onChange:function(e){w(e.target.value)}}),r.a.createElement("div",{className:"profile__modal-btns"},r.a.createElement("button",{className:"profile__modal-btn",onClick:function(){return h(!1)}},"Cancel"),r.a.createElement("button",{className:"profile__modal-btn",onClick:function(){return j(i)}},"Send")))),r.a.createElement("div",{className:"profile__header"},r.a.createElement("div",{className:"profile__img-content"},r.a.createElement("img",{className:"profile__img",src:e.profile.img?"data:image/png;base64,".concat(e.profile.img):N.a,alt:N.a}),r.a.createElement("div",{className:"profile__image-upload",style:i||!f.token?{display:"none"}:{display:"block"}},r.a.createElement("label",{htmlFor:"file-input"},r.a.createElement(C.a,{style:i?{display:"none"}:{display:"block"},className:"profile__uploadIcon",icon:x.d})),r.a.createElement("input",{onChange:function(t){var n=t.target.files[0],r=new FileReader;if(r.onload=function(){var t=Object(_.a)(E.a.mark((function t(n){var r,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,l=window.btoa(r),t.prev=2,t.next=5,a("/api/profile/updateimg","POST",{userId:f.userId,img:l},!0);case 5:if(t.sent){t.next=10;break}return t.abrupt("return",console.log("poka"));case 10:e.updateImg(l);case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(2),new Error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}(),!n)return null;r.readAsBinaryString(n)},className:"file-input",id:"file-input",type:"file"}))),r.a.createElement("div",{className:"profile__header-info"},r.a.createElement("h3",null," ",e.profile.userName," ")),r.a.createElement(C.a,{icon:x.b,style:i&&"following"!==i&&"followers"!==i?{display:"block"}:{display:"none"},className:"profile__messageIcon",onClick:function(){return h(!0)}}),r.a.createElement(c.b,{to:"/edit"},r.a.createElement(C.a,{icon:x.a,className:"profile__edit-icon",style:i?{display:"none"}:{display:"block"}}))),r.a.createElement("div",{className:"profile__stats"},r.a.createElement("div",{className:"profile__followers-num"},r.a.createElement("p",null,"Followers"),r.a.createElement("h1",null,r.a.createElement(c.b,{className:"profile__stats-item",to:"/profile/followers"},e.profile.followers.length))),r.a.createElement("div",{className:"profile__following-num"},r.a.createElement("p",null,"Following"),r.a.createElement("h1",null,r.a.createElement(c.b,{className:"profile__stats-item",to:"/profile/following"},e.profile.following.length)))),r.a.createElement("div",{className:"profile__content"},r.a.createElement(d.b,{path:"/profile/:id?/followers",component:k}),r.a.createElement(d.b,{path:"/profile/:id?/following",component:T}),r.a.createElement(d.b,{path:"/profile/:id?",exact:!0,component:U})))))})),M=a(18);a(106);var R=Object(o.b)((function(e){return{profile:e.profile}}),(function(e){return{setProfile:function(t){return e(w(t))}}}))((function(e){var t=m(),a=O(),l=a.request,s=a.loading,c=a.error,i=Object(n.useState)({userName:"",firstName:"",lastName:"",birthday:"",age:"",about:"",userId:""}),o=Object(u.a)(i,2),f=o[0],p=o[1],d=function(e){p(Object(y.a)(Object(y.a)({},f),{},Object(M.a)({},e.target.name,e.target.value)))},g=function(){var a=Object(_.a)(E.a.mark((function a(n){var r,s;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r=Object(y.a)(Object(y.a)({},f),{},{userId:t.userId}),a.next=4,l("/api/profile/updateinfo","POST",Object(y.a)({},r),!0);case 4:s=a.sent,e.setProfile(s.user),t.login(t.token,t.userId,t.email,e.profile.userName);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"editPage__wrapper"},r.a.createElement("form",{onSubmit:g,className:"editPage"},r.a.createElement("h1",{style:c?{display:"block"}:{display:"none"}},"Error!"),r.a.createElement("label",{htmlFor:"userName"},"Username"),r.a.createElement("input",{onChange:d,className:"editPage__input",type:"text",name:"userName"}),r.a.createElement("label",{htmlFor:"firstName"},"Firstame"),r.a.createElement("input",{onChange:d,className:"editPage__input",type:"text",name:"firstName"}),r.a.createElement("label",{htmlFor:"lastName"},"Lastname"),r.a.createElement("input",{onChange:d,className:"editPage__input",type:"text",name:"lastName"}),r.a.createElement("label",{htmlFor:"birthday"},"Birthday"),r.a.createElement("input",{onChange:d,className:"editPage__input",type:"text",name:"birthday"}),r.a.createElement("label",{htmlFor:"age"},"Age"),r.a.createElement("input",{onChange:d,className:"editPage__input",type:"text",name:"age"}),r.a.createElement("label",{htmlFor:"about"},"About"),r.a.createElement("input",{onChange:d,className:"editPage__input",type:"text",name:"about"}),s?r.a.createElement(S,null):r.a.createElement("button",{className:"editPage__button"},"Edit")))})),A=(a(107),{users:[]});var F=Object(o.b)((function(e){return{users:e.users.users,myProfile:e.myProfile}}),(function(e){return{setUsers:function(t){return e(function(e){return{type:"SET_USERS",users:e}}(t))},setProfile:function(t){return e(w(t))},setMyProfile:function(t){return e(P(t))}}}))((function(e){var t=O(),a=t.request,l=t.loading,s=m(),c=Object(d.f)();function i(){return(i=Object(_.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a("/api/useraction/follow","POST",{userId:n,myId:s.userId},!0);case 3:return t.next=5,a("/api/profile/getinfo","POST",{userId:s.userId},!0);case 5:r=t.sent,e.setMyProfile(r.user),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(0),new Error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function o(){return(o=Object(_.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a("/api/useraction/unfollow","POST",{userId:n,myId:s.userId},!0);case 3:return t.next=5,a("/api/profile/getinfo","POST",{userId:s.userId},!0);case 5:r=t.sent,e.setMyProfile(r.user),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(0),new Error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){a("/api/users/users").then((function(t){return e.setUsers(t.users)}))}),[]),r.a.createElement("div",{className:"users__wrapper"},r.a.createElement("div",{className:"users__content"},l?r.a.createElement(S,null):r.a.createElement(n.Fragment,null,r.a.createElement("ul",{className:"users__list"},e.users.map((function(t){var a=e.users.indexOf(t);return r.a.createElement("li",{key:a,className:"users__list-item"},r.a.createElement("img",{onClick:function(){return e=t.userId,void c.push("/profile/".concat(e));var e},className:"users__item-img",src:t.img?"data:image/png;base64,".concat(t.img):N.a,alt:N.a}),r.a.createElement("span",null," ",t.userName?t.userName:"user".concat(a)," "),r.a.createElement("span",null," ",t.firstName+" "+t.lastName," "),r.a.createElement("span",null," ",t.age?t.age:"NONE"," "),s.userId!==t.userId?e.myProfile.following.some((function(e){return e.id===t.userId}))?r.a.createElement("button",{onClick:function(){return function(e){return o.apply(this,arguments)}(t.userId)},className:"users__button"},"Unfollow"):r.a.createElement("button",{onClick:function(){return function(e){return i.apply(this,arguments)}(t.userId)},className:"users__button"},"Follow"):r.a.createElement("div",null))}))))))}));a(108);var L=Object(o.b)((function(e){return{myProfile:e.myProfile}}))((function(e){return r.a.createElement("div",null,r.a.createElement("header",{className:"messages__header"},r.a.createElement("div",{className:"menu"}),r.a.createElement("div",{className:"messages__personal"},r.a.createElement("span",null,e.myProfile.userName?e.myProfile.userName:"USER"),r.a.createElement("img",{className:"messages__img",src:e.myProfile.img?"data:image/png;base64,".concat(e.myProfile.img):N.a,alt:N.a}))))})),G=(a(109),a(44)),B={dialogs:[],currentMessages:[],currentUser:[],currentDialogId:""};var q=a(32),H=a.n(q);H()("https://obscure-dusk-00211.herokuapp.com/");var J=Object(o.b)((function(e){return{myProfile:e.myProfile,dialogs:e.dialogs}}),(function(e){return{setDialogs:function(t){return e(function(e){return{type:"SET_DIALOGS",data:e}}(t))},setCurrentDialog:function(t){return e({type:"SET_CURRENT_MESSAGES",messages:t})},setCurrentUser:function(t){return e(function(e){return{type:"SET_CUURENT_USER",user:e}}(t))},setCurrentDialogId:function(t){return e(function(e){return{type:"SET_CURRENT_DIALOG_ID",id:e}}(t))}}}))((function(e){var t=O(),a=t.request,l=t.loading,s=Object(d.f)();Object(n.useEffect)((function(){e.myProfile.dialogs.map((function(t){return a("/api/profile/getinfo","POST",{userId:t.with},!0).then((function(a){var n=Object(y.a)(Object(y.a)({},a.user),{},{dialogId:t.id});e.setDialogs(n)}))}))}),[e.myProfile]);var c=function(){var t=Object(_.a)(E.a.mark((function t(n,r){var l,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a("/api/dialogs/getdialog","POST",{id:n},!0);case 3:return l=t.sent,t.next=6,a("/api/profile/getinfo","POST",{userId:r},!0);case 6:c=t.sent,e.setCurrentUser(c.user),e.setCurrentDialog(l.messages),e.setCurrentDialogId(n),s.push("/messages/dialog"),t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(0),new Error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"messages__contacts"},r.a.createElement("h2",{className:"messages__contacts-title"},"Dialogs"),l?r.a.createElement(S,null):r.a.createElement("ul",null,e.dialogs.dialogs.map((function(e){return r.a.createElement("li",{key:e.dialogId,onClick:function(){return c(e.dialogId,e.userId)},className:"messages__contact-item"},r.a.createElement("span",null," ",e.firstName+" "+e.lastName," "))})))))})),X=(a(141),H()("https://obscure-dusk-00211.herokuapp.com/"));var Y=Object(o.b)((function(e){return{myProfile:e.myProfile,currentMessages:e.dialogs.currentMessages,currentUser:e.dialogs.currentUser,currentDialogId:e.dialogs.currentDialogId}}),(function(e){return{addCurrentMessage:function(t){return e(function(e){return{type:"ADD_CURRENT_MESSAGE",obj:e}}(t))}}}))((function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),l=a[0],s=a[1],c=m();return Object(n.useEffect)((function(){e.currentDialogId&&(X.emit("join",{room:e.currentDialogId}),X.on("sending",(function(t){e.addCurrentMessage(t)})))}),[e.currentDialogId]),r.a.createElement("div",null,r.a.createElement("div",{className:"messages__chat"},r.a.createElement("h1",{className:"message__chat-name"},e.currentUser.firstName?e.currentUser.firstName+" "+e.currentUser.lastName:"user"),r.a.createElement("div",{className:"chatMessages"},e.currentMessages.map((function(t){return r.a.createElement("li",{className:t.id===c.userId?"messages__item-message-me":"messages__item-message"},r.a.createElement("img",{className:t.id===c.userId?"messages__img-me":"messages__img",src:t.id===c.userId?"data:image/png;base64,".concat(e.myProfile.img):e.currentUser.img.length?"data:image/png;base64,".concat(e.currentUser.img):N.a,alt:N.a}),r.a.createElement("div",{className:t.id===c.userId?"messages__chat-msg-me":"messages__chat-msg"}," ",t.message," "))}))),r.a.createElement("form",{className:"messages__form",onSubmit:function(t){t.preventDefault(),X.emit("new message",{message:l,id:c.userId}),e.addCurrentMessage({message:l,id:c.userId}),s("")}},r.a.createElement("input",{className:"messages__sendInput",onChange:function(e){s(e.target.value)},type:"text",value:l}),r.a.createElement("button",{className:"messages__chat-btn"},"Send"))))}));a(142);var V=Object(o.b)((function(e){return{myProfile:e.myProfile}}))((function(e){return r.a.createElement("div",{className:"messages__wrapper"},r.a.createElement(L,null),r.a.createElement("div",{className:"messages__content"},r.a.createElement(d.b,{exact:!0,path:"/messages",component:J}),r.a.createElement(d.b,{path:"/messages/dialog",component:Y})))}));var z=Object(o.b)((function(e){return{myProfile:e.myProfile}}),(function(e){return{setMyProfile:function(t){return e(P(t))}}}))((function(e){var t=O().request,a=m().userId;return Object(n.useEffect)((function(){a&&t("/api/profile/getinfo","POST",{userId:a},!0).then((function(t){return e.setMyProfile(t.user)}))}),[a]),r.a.createElement("div",null,r.a.createElement(d.b,{path:"/profile/:id?/:detail?",component:D}),r.a.createElement(d.b,{path:"/edit",component:R}),r.a.createElement(d.b,{path:"/users",component:F}),r.a.createElement(d.b,{path:"/messages",component:V}),r.a.createElement(d.a,{to:"/profile"}))})),K=(a(143),function(){return r.a.createElement("div",{className:"authHeader__wrapper"},r.a.createElement("div",{className:"authIcon"},r.a.createElement("span",{className:"authIcon__item"}),r.a.createElement("span",{className:"authIcon__item"}),r.a.createElement("span",{className:"authIcon__item"}),r.a.createElement("span",{className:"authIcon__item"})),r.a.createElement("div",{className:"authHeader__body"},r.a.createElement(c.b,{className:"authHeader__item",to:"/login"},"SIGN IN"),r.a.createElement(c.b,{className:"authHeader__item",to:"/register"},"SIGN UP")))}),Q=(a(144),function(){var e=Object(n.useState)({email:"",password:""}),t=Object(u.a)(e,2),a=t[0],l=t[1],s=Object(n.useContext)(p),c=Object(d.f)(),i=O(),o=i.request,m=i.loading,f=i.error,g=i.clearError,b=function(e){l(Object(y.a)(Object(y.a)({},a),{},Object(M.a)({},e.target.name,e.target.value)))},N=function(){var e=Object(_.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,o("/api/auth/login","POST",a,!1);case 3:(n=e.sent)&&(g(),s.login(n.token,n.userId,n.email),c.push("/profile"),window.location.reload());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,m?r.a.createElement(S,null):r.a.createElement("form",{className:"authLogin"},r.a.createElement("h1",{style:f?{display:"block"}:{display:"none"}},"Error!"),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{onChange:b,className:"authLogin__input",type:"text",name:"email"}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{onChange:b,className:"authLogin__input",type:"text",name:"password"}),r.a.createElement("button",{onClick:N,className:"authLogin__button"},"Log In")))}),W=(a(145),function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",rePassword:""}),c=Object(u.a)(s,2),i=c[0],o=c[1],m=Object(d.f)(),f=O(),p=f.request,g=f.loading,b=f.error,N=f.clearError,h=function(e){o(Object(y.a)(Object(y.a)({},i),{},Object(M.a)({},e.target.name,e.target.value)))},v=function(){var e=Object(_.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p("/api/auth/register","POST",i,!1);case 4:e.sent&&(l(!0),N(),o(""),setTimeout((function(){m.push("/login")}),500)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,g?r.a.createElement(S,null):r.a.createElement("div",{className:"authRegister"},r.a.createElement("h1",{className:"authRegister__error",style:b?{display:"block"}:{display:"none"}}," Error!"),r.a.createElement("h1",{className:"authRegister__done",style:a?{display:"block"}:{display:"none"}},"User Registered Successfully!"),r.a.createElement("label",{htmlFor:"firstName"},"First name"),r.a.createElement("input",{onChange:h,className:"authRegister__input",type:"text",name:"firstName"}),r.a.createElement("label",{htmlFor:"lastName"},"Last name"),r.a.createElement("input",{onChange:h,className:"authRegister__input",type:"text",name:"lastName"}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{onChange:h,className:"authRegister__input",type:"text",name:"email"}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{onChange:h,className:"authRegister__input",type:"text",name:"password"}),r.a.createElement("label",{htmlFor:"rePassword"},"Enter Password"),r.a.createElement("input",{onChange:h,className:"authRegister__input",type:"text",name:"rePassword"}),r.a.createElement("button",{onClick:v,className:"authRegister__button"},"Sign Up")))}),Z=function(){return r.a.createElement("div",null,r.a.createElement(K,null),r.a.createElement(d.b,{path:"/login",component:Q}),r.a.createElement(d.b,{path:"/register",component:W}))};var $=function(){return r.a.createElement("div",null,r.a.createElement(d.b,{path:"/",component:Z}),r.a.createElement(d.a,{to:"/login"}))},ee=(a(146),{menu:!1});a(147);var te=Object(o.b)((function(e){return{menu:e.menu.menu}}),(function(e){return{toggleMenuBar:function(){return e({type:"TOGGLE_MENU"})}}}))((function(e){var t=m();return r.a.createElement("div",{className:"menuBar",style:e.menu?{display:"block"}:{display:"none"}},r.a.createElement("button",{onClick:e.toggleMenuBar,className:"menu__btn"},"Menu"),r.a.createElement("div",{className:"menuBar__list"},r.a.createElement(c.b,{onClick:e.toggleMenuBar,className:"menu__link",to:"/users"},r.a.createElement("div",{className:"menu__icon-container"},r.a.createElement(C.a,{className:"menu__icon",icon:x.g}),r.a.createElement("span",{className:"menu__icon-desc"},"Users"),r.a.createElement(C.a,{className:"menu__icon-hide",icon:x.g}))),r.a.createElement(c.b,{onClick:e.toggleMenuBar,className:"menu__link",to:"/messages"},r.a.createElement("div",{className:"menu__icon-container"},r.a.createElement(C.a,{className:"menu__icon",icon:x.c}),r.a.createElement("span",{className:"menu__icon-desc"},"Messages"),r.a.createElement(C.a,{className:"menu__icon-hide",icon:x.c}))),r.a.createElement(c.b,{onClick:e.toggleMenuBar,className:"menu__link",to:"/profile"},r.a.createElement("div",{className:"menu__icon-container"},r.a.createElement(C.a,{className:"menu__icon",icon:x.e}),r.a.createElement("span",{className:"menu__icon-desc"},"Profile"),r.a.createElement(C.a,{className:"menu__icon-hide",icon:x.e}))),r.a.createElement("button",{onClick:function(){t.logout(),e.toggleMenuBar()},className:"menu__icon-container"},r.a.createElement(C.a,{className:"menu__icon",icon:x.f}),r.a.createElement("span",{className:"menu__icon-desc"},"Sign Out"),r.a.createElement(C.a,{className:"menu__icon-hide",icon:x.f}))))}));a(148);var ae=Object(o.b)((function(e){return{menu:e.menu.menu}}),(function(e){return{toggleMenuBar:function(){return e({type:"TOGGLE_MENU"})}}}))((function(e){var t=m(),a=t.token,n=t.login,l=t.logout,s=t.userId,c=t.email,i=!!a,o=function(e){return e?r.a.createElement("div",null,r.a.createElement(z,null)):r.a.createElement("div",null,r.a.createElement($,null))}(i);return r.a.createElement(p.Provider,{value:{token:a,userId:s,email:c,login:n,logout:l,isAuthenticated:i}},r.a.createElement(te,null),r.a.createElement("div",{className:e.menu?"App App__menu":"App"},r.a.createElement("button",{onClick:e.toggleMenuBar,className:"menu__btn"},"Menu"),o))})),ne=Object(i.c)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_PROFILE_EDIT":return Object(y.a)(Object(y.a)({},e),{},{edit:!e.edit});case"SET_PROFILE_DATA":var a=t.data,n=a.userId,r=a.birthday,l=a.email,s=a.about,c=a.age,i=a.userName,o=a.img,u=a.firstName,m=a.lastName,f=a.followers,p=a.following,d=a.dialogs;return Object(y.a)(Object(y.a)({},e),{},{userId:n,firstName:u,lastName:m,img:o,userName:i,birthday:r,email:l,followers:f,following:p,about:s,age:c,dialogs:d});case"UPDATE_PROFILE_DATA":var g=t.form,E=g.birthday,_=g.about,b=g.age,N=g.userName;return Object(y.a)(Object(y.a)({},e),{},{userName:N,birthday:E,about:_,age:b});case"UPDATE_PROFILE_IMG":return Object(y.a)(Object(y.a)({},e),{},{img:t.img});default:return e}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MENU":return{menu:!e.menu};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return{users:t.users};default:return e}},myProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MY_PROFILE_DATA":var a=t.data,n=a.userId,r=a.birthday,l=a.email,s=a.about,c=a.age,i=a.userName,o=a.img,u=a.firstName,m=a.lastName,f=a.followers,p=a.following,d=a.dialogs;return Object(y.a)(Object(y.a)({},e),{},{userId:n,firstName:u,lastName:m,img:o,userName:i,birthday:r,email:l,followers:f,following:p,about:s,age:c,dialogs:d});default:return e}},dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DIALOGS":return Object(y.a)(Object(y.a)({},e),{},{dialogs:[].concat(Object(G.a)(e.dialogs),[t.data])});case"SET_CURRENT_MESSAGES":return Object(y.a)(Object(y.a)({},e),{},{currentMessages:t.messages});case"SET_CUURENT_USER":return Object(y.a)(Object(y.a)({},e),{},{currentUser:t.user});case"SET_CURRENT_DIALOG_ID":return Object(y.a)(Object(y.a)({},e),{},{currentDialogId:t.id});case"ADD_CURRENT_MESSAGE":var a=[].concat(Object(G.a)(e.currentMessages),[t.obj]);return Object(y.a)(Object(y.a)({},e),{},{currentMessages:a});default:return e}}}),re=(a(149),"object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):i.d),le=Object(i.e)(ne,re(Object(i.a)()));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:le},r.a.createElement(c.a,null,r.a.createElement(ae,null)))),document.getElementById("root"))},72:function(e,t,a){e.exports=a(150)},98:function(e,t,a){},99:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.a9e61205.chunk.js.map